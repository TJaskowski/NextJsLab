(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{3636:(e,t,a)=>{Promise.resolve().then(a.bind(a,7050))},7050:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),l=a(4565),i=a(1788),r=a(2115),d=a(9606),o=a(7982),n=a(7058);function u(){let{user:e}=(0,i.A)(),t=(0,l.xI)(),[a,u]=(0,r.useState)(!0),[c,p]=(0,r.useState)(""),{register:m,setValue:x,handleSubmit:g,formState:{errors:y}}=(0,d.mN)({defaultValues:{displayName:(null==e?void 0:e.displayName)||"".concat(null==e?void 0:e.email),email:(null==e?void 0:e.email)||"",street:"",city:"",zipCode:"",photoURL:(null==e?void 0:e.photoURL)||""}});(0,r.useEffect)(()=>{(async()=>{try{if(null==e?void 0:e.uid){let t=await (0,n.x7)((0,n.H9)(o.db,"users",null==e?void 0:e.uid));if(t.exists()){let e=t.data().address;x("street",(null==e?void 0:e.street)||""),x("city",(null==e?void 0:e.city)||""),x("zipCode",(null==e?void 0:e.zipCode)||"")}}}catch(e){console.error("Error getting document:",e),p("Wystąpił błąd podczas pobierania danych z Firestore.")}finally{u(!1)}})()},[null==e?void 0:e.uid,x]);let b=async a=>{try{await (0,l.r7)(t.currentUser,{displayName:a.displayName,photoURL:a.photoURL}),console.log("Profil zaktualizowany"),await (0,n.BN)((0,n.H9)(o.db,"users",null==e?void 0:e.uid),{address:{street:a.street,city:a.city,zipCode:a.zipCode}}),console.log("Dane uzytkownika zaktualizowane")}catch(e){console.error("Wystąpił błąd podczas aktualizacji danych: ",e),"permission-denied"===e.code?p("Brak uprawnień do zapisu danych w Firestore."):p("Wystąpił błąd: "+e.message)}};return(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"User Profile"}),c&&(0,s.jsx)("div",{className:"alert alert-error mb-4 bg-red-100 text-red-600 p-4 rounded",children:(0,s.jsx)("p",{children:c})}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:g(b),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Display Name"}),(0,s.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Display Name",...m("displayName",{required:"Nazwa użytkownika jest wymagana",maxLength:{value:50,message:"Nazwa użytkownika jest za długa"}}),disabled:a}),y.displayName&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y.displayName.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!0,value:(null==e?void 0:e.email)||""})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Street"}),(0,s.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Street",...m("street"),disabled:a})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"City"}),(0,s.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"City",...m("city"),disabled:a})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Zip Code"}),(0,s.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Zip Code",...m("zipCode",{maxLength:{value:6,message:"Kod pocztowy jest za długi"}}),disabled:a}),y.zipCode&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y.zipCode.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Profile Photo"}),(0,s.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Profile Photo URL",...m("photoURL",{pattern:{value:/^(https?:\/\/.*\.(?:png|jpg|jpeg|gif|svg))$/,message:"Niepoprawny adres URL zdjęcia"}})}),y.photoURL&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y.photoURL.message})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 rounded-lg transition duration-200 mt-4",disabled:a,children:a?"Loading...":"Save"})]})]})})}},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,AuthProvider:()=>o});var s=a(5155),l=a(2115),i=a(4565),r=a(7982);let d=(0,l.createContext)(),o=e=>{let{children:t}=e,[a,o]=(0,l.useState)(null),[n,u]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=(0,i.hg)(r.j,e=>{o(e),u(!1)});return()=>e()},[]),(0,s.jsx)(d.Provider,{value:{user:a,loading:n},children:t})},n=()=>(0,l.useContext)(d)},7982:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j:()=>d});var s=a(9904),l=a(4565),i=a(7058);let r=(0,s.Wp)({apiKey:"AIzaSyDgBxBNUbHiSD2JKHjim8dbsVj4wLlHAR0",authDomain:"nextjslab-2d9a2.firebaseapp.com",projectId:"nextjslab-2d9a2",storageBucket:"nextjslab-2d9a2.firebasestorage.app",messagingSenderId:"96822370071",appId:"1:96822370071:web:79ccef53c215661ce2a152"}),d=(0,l.xI)(r),o=(0,i.aU)(r)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,697,861,606,441,517,358],()=>t(3636)),_N_E=e.O()}]);